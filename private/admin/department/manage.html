<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>BAD-C | Department Manager</title>
	</head>
	<body>
		<h1>Department Manager</h1>
		<form action="/api/v2/department/update" method="POST">
			<ul>
				<li><a href="/api/v2/department/create">New Department</a></li>
				<li>
					<!-- TODO: Create an entry for every item in database -->
					<input
						type="text"
						value="dsfkasfjksdfh"
						name="_id"
						id="_id"
						disabled
						hidden
					/>
					<label for="name"></label>
					<input type="text" name="name" id="name" disabled />
					<span onclick="edit(this);">Edit</span>
					<span onclick="remove(this);">Delete</span>
				</li>
			</ul>
		</form>

		<script>
			function edit(element) {
				if (element.innerHTML == "Save") {
					element.parentElement.children[2].disabled = true;
					element.innerHTML = "Edit";
					document.location.href =
						"/api/v2/department/update/" +
						element.parentElement.children[0].value +
						"/" +
						element.parentElement.children[2].value;
					// TODO: Somehow submit this to the server as a change.....
				} else {
					element.parentElement.children[2].disabled = false;
					element.innerHTML = "Save";
				}
			}

			function remove(element) {
				document.location.href =
					"/api/v2/department/delete/" +
					element.parentElement.children[0].value;
			}

			function get_departments() {
				// Onload get all departments.
				const destination =
					// window.location.host.toString() +
					"localhost:8080/api/v2/department/read";
				let request = new XMLHttpRequest();
				request.open("GET", "localhost:8080/api/v2/department/read");
				request.responseType = "text";

				request.onload = function () {
					console.table(request.response);
				};

				request.send();
				console.log("DONE");
			}
		</script>
	</body>
</html>
